{
  "project_meta": {
    "name": "Ani-Radar",
    "phase": "4 (Core UI Components)",
    "description": "Bahamut Anime Rating Dashboard with Cross-Platform Data",
    "tech_stack": ["Next.js 16", "TypeScript", "Tailwind CSS", "shadcn/ui"]
  },
  "data_schema": {
    "Anime": {
      "id": "string (Unique ID from Bahamut)",
      "title": "string (Chinese Title)",
      "titleOriginal": "string (Japanese Original Title, Optional)",
      "thumbnail": "string (URL)",
      "year": "number (Release Year)",
      "genres": "string[] (List of genres)",
      "episodes": "number (Total episodes)",
      "bahamutUrl": "string (Direct link to Bahamut)",
      "popularity": "number (View count)",
      "ratings": {
        "bahamut": {
          "score": "number (1-5 scale)",
          "votes": "number"
        },
        "imdb": {
          "score": "number (0-10 scale, Optional)",
          "votes": "number (Optional)",
          "id": "string (ttID, Optional)"
        },
        "douban": {
          "score": "number (0-10 scale, Optional)",
          "votes": "number (Optional)",
          "id": "string (Optional)"
        },
        "myanimelist": {
          "score": "number (0-10 scale, Optional)",
          "members": "number (Optional)",
          "id": "number (Optional)"
        }
      }
    }
  },
  "app_state": {
    "filters": {
      "searchQuery": "string (Full-text search, matches title or titleOriginal)",
      "genres": "string[] (Selected genres, OR logic)",
      "yearOption": "string | undefined (Preset ranges: 'All', '2025', '2024', ..., '2010-2019', etc.)",
      "minVotes": "number (Minimum Bahamut votes required)"
    },
    "sorting": {
      "sortBy": "enum('bahamut', 'imdb', 'douban', 'myanimelist', 'composite')",
      "direction": "desc (Always high to low for this MVP)"
    },
    "weights": {
      "bahamut": "number (0-100, Default: 25)",
      "imdb": "number (0-100, Default: 25)",
      "douban": "number (0-100, Default: 25)",
      "myanimelist": "number (0-100, Default: 25)",
      "_constraint": "Sum must equal 100"
    }
  },
  "business_logic": {
    "filtering": {
      "search_behavior": "When searchQuery is present, ignore year and genre filters. Still respect sorting.",
      "genre_logic": "OR logic. If ['Action', 'Comedy'] selected, show anime that has 'Action' OR 'Comedy'.",
      "year_logic": "Filter based on predefined ranges (e.g., 2010-2019 matches year >= 2010 && year <= 2019).",
      "missing_data": "If minVotes is set, filter based on 'ratings.bahamut.votes'."
    },
    "sorting": {
      "strategy": "Sort by the selected key.",
      "missing_handling": "If an anime lacks the rating for the selected sort key, it must be placed at the BOTTOM.",
      "secondary_sort": "Always use 'ratings.bahamut.score' as a tie-breaker or secondary sort key."
    },
    "composite_score_formula": "((bahamut_score * 2 * w_bahamut) + (imdb_score * w_imdb) + (douban_score * w_douban) + (mal_score * w_mal)) / (sum_of_weights_for_available_ratings)",
    "normalization": {
      "bahamut": "score * 2 (Convert 1-5 to 0-10)",
      "others": "score (Already 0-10)"
    }
  },
  "ui_components": {
    "AnimeCard": {
      "props": { "anime": "Anime" },
      "elements": [
        "Thumbnail Image (Cover)",
        "Title (Truncated if too long)",
        "Info Row: Year ¬∑ Genres (First 2-3) ¬∑ Episodes",
        "Rating Badge Row: Show available ratings with icons (‚≠ê Bahamut, üé¨ IMDb, üé≠ Douban, üì∫ MAL). Hide missing ones.",
        "Watch Button: Opens bahamutUrl in new tab"
      ]
    },
    "AnimeGrid": {
      "props": { "animes": "Anime[]" },
      "layout": "Responsive Grid (2 cols mobile, 3 cols tablet, 4 cols desktop)",
      "empty_state": "Show 'No results found' message if list is empty"
    },
    "FilterSidebar": {
      "props": {
        "state": "AppState",
        "onFilterChange": "(key, value) => void",
        "availableGenres": "string[]"
      },
      "elements": [
        "SearchInput (Text)",
        "GenreFilter (Checkbox Group)",
        "YearFilter (Select/Dropdown with Presets: All, 2025, 2024, 2023, 2022, 2021, 2020, 2010-2019, 2000-2009, 1980-1999)",
        "MinVotes (Slider)",
        "SortSelector (Select/Dropdown)",
        "WeightConfig (Collapsible Panel with 4 Sliders)"
      ]
    }
  },
  "mock_data": [
    {
      "id": "1",
      "title": "Frieren: Beyond Journey's End",
      "titleOriginal": "Ëë¨ÈÄÅ„ÅÆ„Éï„É™„Éº„É¨„É≥",
      "year": 2023,
      "genres": ["Adventure", "Fantasy", "Drama"],
      "episodes": 28,
      "bahamutUrl": "https://ani.gamer.com.tw/animeRef.php?sn=1",
      "thumbnail": "https://example.com/frieren.jpg",
      "popularity": 1000000,
      "ratings": {
        "bahamut": { "score": 4.9, "votes": 15000 },
        "imdb": { "score": 8.9, "votes": 20000 },
        "douban": { "score": 9.1, "votes": 50000 },
        "myanimelist": { "score": 9.3, "members": 500000 }
      }
    },
    {
      "id": "2",
      "title": "Generic Isekai #42",
      "titleOriginal": "Áï∞‰∏ñÁïå...",
      "year": 2024,
      "genres": ["Fantasy", "Action"],
      "episodes": 12,
      "bahamutUrl": "https://ani.gamer.com.tw/animeRef.php?sn=2",
      "thumbnail": "https://example.com/isekai.jpg",
      "popularity": 50000,
      "ratings": {
        "bahamut": { "score": 4.2, "votes": 500 },
        "myanimelist": { "score": 6.5, "members": 1000 }
      }
    },
    {
      "id": "3",
      "title": "Niche Art Film",
      "titleOriginal": "Art...",
      "year": 2020,
      "genres": ["Drama"],
      "episodes": 1,
      "bahamutUrl": "https://ani.gamer.com.tw/animeRef.php?sn=3",
      "thumbnail": "https://example.com/art.jpg",
      "popularity": 2000,
      "ratings": {
        "bahamut": { "score": 3.8, "votes": 50 },
        "douban": { "score": 8.5, "votes": 200 }
      }
    }
  ]
}